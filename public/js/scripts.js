// Generated by CoffeeScript 1.3.3
(function() {

  window.Scripts = {
    signup: function() {
      var checkName, initCheck, timer;
      timer = null;
      initCheck = $('input#username').attr('placeholder');
      $('input#username').keyup(function() {
        $('input#username').css('color', 'grey');
        clearTimeout(timer);
        return timer = setTimeout(function() {
          var username;
          username = $('input#username').val();
          console.log("check");
          return checkName(username);
        }, 300);
      });
      checkName = function(username) {
        return $.post('/check-username', {
          "user_name": username
        }, function(res) {
          console.log(res);
          if (res === "taken") {
            $('button#signup').addClass('btn-danger').attr('disabled', 'disabled').html('Username is taken');
            return $('input#username').css('color', 'red');
          } else {
            $('button#signup').removeClass('btn-danger').removeAttr('disabled').html('Sign Up!');
            return $('input#username').css('color', 'green');
          }
        });
      };
      checkName(initCheck);
      $('button#signup').click(function() {
        var username;
        username = $('input#username').val();
        if (!username) {
          username = $('input#username').attr("placeholder");
        }
        console.log(username);
        return $.post('new-user', {
          "user_name": username
        }, function(res) {
          return $('div.content').html('<button class="btn-large color">Do you like light?</button><button class="btn-large btn-inverse color">Or dark?</button>');
        });
      });
      return $('button.color').live("click", function() {
        var color;
        color = null;
        if ($(this).hasClass('btn-inverse')) {
          color = "dark";
        } else {
          color = "light";
        }
        console.log(color);
        return $.post('/color-choice', {
          "color": color
        }, function(res) {
          console.log(res);
          return window.location.href = "/sync";
        });
      });
    },
    videoInfo: function(id, user) {
      return $.post('/video-info', {
        "video_id": id,
        "user": user
      }, function(res) {
        return console.log(res);
      });
    }
  };

}).call(this);
